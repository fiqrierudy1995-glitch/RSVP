<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <title>Fazliana & Fiqrie Wedding Invitation</title>
    <meta name="description" content="Raikan cinta kami di Majlis Bertaut Kasih Fazliana & Fiqrie." />
<!-- PNG versions -->
<link rel="icon" type="image/png" sizes="32x32" href="/favicon.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon.png">

    <!-- Open Graph -->
    <meta property="og:title" content="Majlis Bertaut Kasih Fazliana & Fiqrie ðŸ’" />
    <meta property="og:description" content="Dengan penuh kasih dan syukur, kami menjemput anda meraikan hari bahagia kami." />
    <meta property="og:image" content="https://jemputkasih.com/images/frontpage.png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:url" content="https://jemputkasih.com" />
    <meta property="og:type" content="website" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Majlis Bertaut Kasih Fazliana & Fiqrie ðŸ’" />
    <meta name="twitter:description" content="Raikan cinta kami di Majlis Bertaut Kasih Fazliana & Fiqrie." />
    <meta name="twitter:image" content="https://jemputkasih.com/images/frontpage.png" />

    <link rel="icon" href="https://jemputkasih.com/images/favicon.ico" type="image/x-icon" />

    <style>
      /* Global Styles */
      body {
        font-family: 'Helvetica Neue', Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #ffffff;
        color: #333333;
        line-height: 1.6;
        text-align: center; /* Centering everything */
      }

      /* Mobile frame for simulating phone screen */
      .mobile-frame {
        width: 100%;
        max-width: 430px;
        height: 844px;
        margin: 0 auto;
        position: relative;
        overflow: hidden;
        border: 16px solid #fff;
        border-radius: 36px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      /* Content inside mobile frame */
      .content {
        padding: 20px;
        height: 100%;
        overflow-y: auto;
      }

      /* Header */
      header {
        background-color: #fff;
        text-align: center;
        padding: 20px 0;
        font-size: 22px;
        color: #2c3e50;
        font-weight: bold;
        border-bottom: 2px solid #ddd;
      }

      header nav ul {
        list-style: none;
        padding: 0;
        margin-top: 10px;
        text-align: center;
      }

      header nav ul li {
        display: inline-block;
        margin: 10px;
      }

      header nav ul li a {
        text-decoration: none;
        color: #000000;
        font-weight: bold;
      }

      /* Main Content Section */
      .main-content {
        margin-top: 20px;
        text-align: center;
      }

      .button {
        padding: 12px 24px;
        background-color: #efe4aaa4;
        color: rgb(0, 0, 0);
        border: none;
        border-radius: 5px;
        font-size: 16px;
        cursor: pointer;
        margin: 10px;
        width: 200px;
      }

      .button:hover {
        background-color: #ffffff;
      }

      /* RSVP Section for Attending Guests and Wishes (Side by Side) */
      .view-sections {
        display: flex;
        justify-content: center;
        gap: 30px;
        margin-top: 20px;
      }

      .view-section {
        padding: 20px;
        width: 90%; /* Allow both sections to take up equal space */
        background-color: #fff;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        border: 1px solid #e0e0e0;
        text-align: center;
      }

      .view-section h2 {
        color: #2c3e50;
        font-size: 24px;
        margin-bottom: 20px;
      }

      table {
        width: 100%;
        margin-top: 10px;
        border-collapse: collapse;
        text-align: center;
      }

      table th,
      table td {
        padding: 12px 18px;
        text-align: center;
        border-bottom: 1px solid #ddd;
      }

      table th {
        background-color: #e8f1f2;
        color: #2c3e50;
        font-weight: bold;
      }

      table td {
        background-color: #f9f9f9;
      }

      table tr:hover {
        background-color: #f1f1f1;
      }

      /* Minimalist Wedding Design */
      footer {
        background-color: #fff;
        color: #2c3e50;
        padding: 10px;
        text-align: center;
        border-top: 1px solid #ddd;
        font-size: 14px;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .mobile-frame {
          height: 100%;
          width: 100%;
        }

        .view-sections {
          flex-direction: column; /* Stack the sections on small screens */
          gap: 20px;
        }

        .button {
          width: 100%;
        }

        table th,
        table td {
          padding: 10px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Mobile Frame -->
    <div class="mobile-frame">
      <div class="content">
        <!-- Header Section -->
        <header>
          <h1>RSVP</h1>
          <nav>
            <ul>
              <li><a href="/fazliana-fiqrie">Home</a></li>
              <li><a href="/fazliana-fiqrie/dashboard">Dashboard</a></li>
            </ul>
          </nav>
        </header>

        <!-- Main Content Section -->
        <div class="main-content">
          <h2>We are Getting Married!</h2>
          <p>Join us in celebrating our special day. We are excited to share this beautiful journey with you!</p>
          
          <!-- Display Total Attendance -->
          <p id="total-attendance" style="font-weight: bold; font-size: 18px; margin-top: 20px;">Total Attendance: Loading...</p>

          <!-- Two buttons to toggle between Attendance and Wishes -->
          <button class="button" id="view-attendance">View Attendance</button>
          <button class="button" id="view-wishes">View Wishes</button>
        </div>

        <!-- RSVP Sections for Attending Guests and Wishes (Side by Side) -->
        <div class="view-sections">
          <!-- Attending Guests Section -->
          <section class="view-section" id="attendance-section" style="display: none;">
            <h2>Attending Guests</h2>
            <table>
              <thead>
                <tr>
                  <th>Name</th>
                </tr>
              </thead>
              <tbody id="attending-guest-body">
                <!-- Attending guests will be dynamically inserted here -->
              </tbody>
            </table>
          </section>

          <!-- Wishes Section -->
          <section class="view-section" id="wishes-section" style="display: none;">
            <h2>All Wishes</h2>
            <table>
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Wish</th>
                </tr>
              </thead>
              <tbody id="all-wishes-body">
                <!-- Wishes will be dynamically inserted here -->
              </tbody>
            </table>
          </section>
        </div>
      </div>
    </div>

    <footer>
      <p>&copy; 2025 Fazliana & Fiqrie ðŸ’•</p>
    </footer>

    <script>
      const API_KEY = 'AIzaSyBzu_y3uzM23uaH11OID5KXkH7RGIlrhXg';  // Replace with your actual API key
      const SHEET_ID = '1wsWUfO921Hso8k_KLFtDVCTUE41ds4w7PzgyAKxJ9No';  // Your Sheet ID

      const attendingGuestsApiUrl = `https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/SENARAI%20PENUH!B4:B?key=${API_KEY}`;
      const wishesApiUrl = `https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/WISHES!I4:L?key=${API_KEY}`;
      const totalAttendanceApiUrl = `https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/SENARAI%20PENUH!D4?key=${API_KEY}`;

      async function fetchRSVPData() {
        try {
          const attendingResponse = await fetch(attendingGuestsApiUrl);
          const attendingData = await attendingResponse.json();

          const wishesResponse = await fetch(wishesApiUrl);
          const wishesData = await wishesResponse.json();

          const totalAttendanceResponse = await fetch(totalAttendanceApiUrl);
          const totalAttendanceData = await totalAttendanceResponse.json();
          const totalAttendance = totalAttendanceData.values[0][0];  // D4 value

          const attendingGuests = attendingData.values;
          const wishes = wishesData.values;

          const attendingGuestBody = document.getElementById('attending-guest-body');
          const allWishesBody = document.getElementById('all-wishes-body');
          const totalAttendanceDisplay = document.getElementById('total-attendance');

          attendingGuestBody.innerHTML = '';
          allWishesBody.innerHTML = '';

          // Display the total attendance
          totalAttendanceDisplay.textContent = `Total Attendance: ${totalAttendance}`;

          // Display attending guests
          attendingGuests.forEach((row) => {
            const guestName = row[0];
            const tr = document.createElement('tr');
            const nameTd = document.createElement('td');
            nameTd.textContent = guestName;
            tr.appendChild(nameTd);
            attendingGuestBody.appendChild(tr);
          });

          // Display all wishes
          wishes.forEach((row) => {
            const guestName = row[0];
            const wish = row[1] || 'No message';

            const tr = document.createElement('tr');
            const nameTd = document.createElement('td');
            nameTd.textContent = guestName;
            tr.appendChild(nameTd);

            const wishTd = document.createElement('td');
            wishTd.textContent = wish;
            tr.appendChild(wishTd);

            allWishesBody.appendChild(tr);
          });

        } catch (error) {
          console.error('Error fetching data from Google Sheets:', error);
        }
      }

      // Fetch data once page loads
      fetchRSVPData();

      // Toggle between the two views (Attendance and Wishes)
      document.getElementById('view-attendance').addEventListener('click', function () {
        document.getElementById('attendance-section').style.display = 'block';
        document.getElementById('wishes-section').style.display = 'none';
      });

      document.getElementById('view-wishes').addEventListener('click', function () {
        document.getElementById('attendance-section').style.display = 'none';
        document.getElementById('wishes-section').style.display = 'block';
      });
    </script>
  </body>
</html>
